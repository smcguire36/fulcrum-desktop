'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _minidb = require('minidb');

var _fulcrumCore = require('fulcrum-core');

class Photo {
  static get tableName() {
    return 'photos';
  }

  static get columns() {
    return [{ name: 'accountRowID', column: 'account_id', type: 'integer', null: false }, { name: 'id', column: 'resource_id', type: 'string', null: false }, { name: 'exif', column: 'exif', type: 'json' }, { name: 'filePath', column: 'file_path', type: 'string' }, { name: 'fileSize', column: 'file_size', type: 'integer' }, { name: 'contentType', column: 'content_type', type: 'string' }, { name: 'isDownloaded', column: 'is_downloaded', type: 'boolean', null: false }, { name: 'isUploaded', column: 'is_uploaded', type: 'boolean', null: false }, { name: 'isStored', column: 'is_stored', type: 'boolean', null: false }, { name: 'isProcessed', column: 'is_processed', type: 'boolean', null: false }, { name: 'latitude', column: 'latitude', type: 'double' }, { name: 'longitude', column: 'longitude', type: 'double' }, { name: 'formRowID', column: 'form_id', type: 'integer' }, { name: 'formID', column: 'form_resource_id', type: 'string' }, { name: 'recordRowID', column: 'record_id', type: 'integer' }, { name: 'recordID', column: 'record_resource_id', type: 'string' }, { name: 'updatedByRowID', column: 'updated_by_id', type: 'integer' }, { name: 'updatedByID', column: 'updated_by_resource_id', type: 'string' }, { name: 'createdByRowID', column: 'created_by_id', type: 'integer' }, { name: 'createdByID', column: 'created_by_resource_id', type: 'string' }, { name: 'altitude', column: 'altitude', type: 'double' }, { name: 'accuracy', column: 'accuracy', type: 'double' }, { name: 'direction', column: 'direction', type: 'double' }, { name: 'width', column: 'width', type: 'integer' }, { name: 'height', column: 'height', type: 'integer' }, { name: 'make', column: 'make', type: 'string' }, { name: 'model', column: 'model', type: 'string' }, { name: 'software', column: 'software', type: 'string' }, { name: 'dateTime', column: 'date_time', type: 'string' }, { name: 'createdAt', column: 'server_created_at', type: 'datetime' }, { name: 'updatedAt', column: 'server_updated_at', type: 'datetime' }];
  }

  get id() {
    return this._id;
  }

  updateFromAPIAttributes(attributes) {
    this._id = attributes.access_key;
    this._exif = attributes.exif;
    this._fileSize = attributes.file_size;
    this._latitude = attributes.latitude;
    this._longitude = attributes.longitude;
    this._isUploaded = attributes.uploaded;
    this._isStored = attributes.stored;
    this._isProcessed = attributes.processed;
    this._contentType = attributes.content_type;
    this._createdByID = attributes.created_by_id;
    this._updatedByID = attributes.updated_by_id;
    this._createdAt = _fulcrumCore.DateUtils.parseISOTimestamp(attributes.created_at);
    this._updatedAt = _fulcrumCore.DateUtils.parseISOTimestamp(attributes.updated_at);
    this._formID = attributes.form_id;
    this._recordID = attributes.record_id;

    if (attributes.exif) {
      const { exif } = attributes;

      this._altitude = exif.gps_altitude;
      this._direction = exif.gps_img_direction;
      this._accuracy = exif.gps_dop;
      this._width = exif.pixel_x_dimension;
      this._height = exif.pixel_y_dimension;
      this._make = exif.make;
      this._model = exif.model;
      this._software = exif.software;
      this._dateTime = exif.date_time_original || exif.date_time;
    }
  }

  get isDownloaded() {
    return this._isDownloaded;
  }

  set isDownloaded(value) {
    this._isDownloaded = !!value;
  }

  get createdAt() {
    return this._createdAt;
  }

  get updatedAt() {
    return this._updatedAt;
  }
}

exports.default = Photo;
_minidb.PersistentObject.register(Photo);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tYWluL21vZGVscy9waG90by5qcyJdLCJuYW1lcyI6WyJQaG90byIsInRhYmxlTmFtZSIsImNvbHVtbnMiLCJuYW1lIiwiY29sdW1uIiwidHlwZSIsIm51bGwiLCJpZCIsIl9pZCIsInVwZGF0ZUZyb21BUElBdHRyaWJ1dGVzIiwiYXR0cmlidXRlcyIsImFjY2Vzc19rZXkiLCJfZXhpZiIsImV4aWYiLCJfZmlsZVNpemUiLCJmaWxlX3NpemUiLCJfbGF0aXR1ZGUiLCJsYXRpdHVkZSIsIl9sb25naXR1ZGUiLCJsb25naXR1ZGUiLCJfaXNVcGxvYWRlZCIsInVwbG9hZGVkIiwiX2lzU3RvcmVkIiwic3RvcmVkIiwiX2lzUHJvY2Vzc2VkIiwicHJvY2Vzc2VkIiwiX2NvbnRlbnRUeXBlIiwiY29udGVudF90eXBlIiwiX2NyZWF0ZWRCeUlEIiwiY3JlYXRlZF9ieV9pZCIsIl91cGRhdGVkQnlJRCIsInVwZGF0ZWRfYnlfaWQiLCJfY3JlYXRlZEF0IiwicGFyc2VJU09UaW1lc3RhbXAiLCJjcmVhdGVkX2F0IiwiX3VwZGF0ZWRBdCIsInVwZGF0ZWRfYXQiLCJfZm9ybUlEIiwiZm9ybV9pZCIsIl9yZWNvcmRJRCIsInJlY29yZF9pZCIsIl9hbHRpdHVkZSIsImdwc19hbHRpdHVkZSIsIl9kaXJlY3Rpb24iLCJncHNfaW1nX2RpcmVjdGlvbiIsIl9hY2N1cmFjeSIsImdwc19kb3AiLCJfd2lkdGgiLCJwaXhlbF94X2RpbWVuc2lvbiIsIl9oZWlnaHQiLCJwaXhlbF95X2RpbWVuc2lvbiIsIl9tYWtlIiwibWFrZSIsIl9tb2RlbCIsIm1vZGVsIiwiX3NvZnR3YXJlIiwic29mdHdhcmUiLCJfZGF0ZVRpbWUiLCJkYXRlX3RpbWVfb3JpZ2luYWwiLCJkYXRlX3RpbWUiLCJpc0Rvd25sb2FkZWQiLCJfaXNEb3dubG9hZGVkIiwidmFsdWUiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJyZWdpc3RlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7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aW1wb3J0IHsgUGVyc2lzdGVudE9iamVjdCB9IGZyb20gJ21pbmlkYic7XHJcbmltcG9ydCB7IERhdGVVdGlscyB9IGZyb20gJ2Z1bGNydW0tY29yZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQaG90byB7XHJcbiAgc3RhdGljIGdldCB0YWJsZU5hbWUoKSB7XHJcbiAgICByZXR1cm4gJ3Bob3Rvcyc7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IGNvbHVtbnMoKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICB7IG5hbWU6ICdhY2NvdW50Um93SUQnLCBjb2x1bW46ICdhY2NvdW50X2lkJywgdHlwZTogJ2ludGVnZXInLCBudWxsOiBmYWxzZSB9LFxyXG4gICAgICB7IG5hbWU6ICdpZCcsIGNvbHVtbjogJ3Jlc291cmNlX2lkJywgdHlwZTogJ3N0cmluZycsIG51bGw6IGZhbHNlIH0sXHJcbiAgICAgIHsgbmFtZTogJ2V4aWYnLCBjb2x1bW46ICdleGlmJywgdHlwZTogJ2pzb24nIH0sXHJcbiAgICAgIHsgbmFtZTogJ2ZpbGVQYXRoJywgY29sdW1uOiAnZmlsZV9wYXRoJywgdHlwZTogJ3N0cmluZycgfSxcclxuICAgICAgeyBuYW1lOiAnZmlsZVNpemUnLCBjb2x1bW46ICdmaWxlX3NpemUnLCB0eXBlOiAnaW50ZWdlcicgfSxcclxuICAgICAgeyBuYW1lOiAnY29udGVudFR5cGUnLCBjb2x1bW46ICdjb250ZW50X3R5cGUnLCB0eXBlOiAnc3RyaW5nJyB9LFxyXG4gICAgICB7IG5hbWU6ICdpc0Rvd25sb2FkZWQnLCBjb2x1bW46ICdpc19kb3dubG9hZGVkJywgdHlwZTogJ2Jvb2xlYW4nLCBudWxsOiBmYWxzZSB9LFxyXG4gICAgICB7IG5hbWU6ICdpc1VwbG9hZGVkJywgY29sdW1uOiAnaXNfdXBsb2FkZWQnLCB0eXBlOiAnYm9vbGVhbicsIG51bGw6IGZhbHNlIH0sXHJcbiAgICAgIHsgbmFtZTogJ2lzU3RvcmVkJywgY29sdW1uOiAnaXNfc3RvcmVkJywgdHlwZTogJ2Jvb2xlYW4nLCBudWxsOiBmYWxzZSB9LFxyXG4gICAgICB7IG5hbWU6ICdpc1Byb2Nlc3NlZCcsIGNvbHVtbjogJ2lzX3Byb2Nlc3NlZCcsIHR5cGU6ICdib29sZWFuJywgbnVsbDogZmFsc2UgfSxcclxuICAgICAgeyBuYW1lOiAnbGF0aXR1ZGUnLCBjb2x1bW46ICdsYXRpdHVkZScsIHR5cGU6ICdkb3VibGUnIH0sXHJcbiAgICAgIHsgbmFtZTogJ2xvbmdpdHVkZScsIGNvbHVtbjogJ2xvbmdpdHVkZScsIHR5cGU6ICdkb3VibGUnIH0sXHJcbiAgICAgIHsgbmFtZTogJ2Zvcm1Sb3dJRCcsIGNvbHVtbjogJ2Zvcm1faWQnLCB0eXBlOiAnaW50ZWdlcicgfSxcclxuICAgICAgeyBuYW1lOiAnZm9ybUlEJywgY29sdW1uOiAnZm9ybV9yZXNvdXJjZV9pZCcsIHR5cGU6ICdzdHJpbmcnIH0sXHJcbiAgICAgIHsgbmFtZTogJ3JlY29yZFJvd0lEJywgY29sdW1uOiAncmVjb3JkX2lkJywgdHlwZTogJ2ludGVnZXInIH0sXHJcbiAgICAgIHsgbmFtZTogJ3JlY29yZElEJywgY29sdW1uOiAncmVjb3JkX3Jlc291cmNlX2lkJywgdHlwZTogJ3N0cmluZycgfSxcclxuICAgICAgeyBuYW1lOiAndXBkYXRlZEJ5Um93SUQnLCBjb2x1bW46ICd1cGRhdGVkX2J5X2lkJywgdHlwZTogJ2ludGVnZXInIH0sXHJcbiAgICAgIHsgbmFtZTogJ3VwZGF0ZWRCeUlEJywgY29sdW1uOiAndXBkYXRlZF9ieV9yZXNvdXJjZV9pZCcsIHR5cGU6ICdzdHJpbmcnIH0sXHJcbiAgICAgIHsgbmFtZTogJ2NyZWF0ZWRCeVJvd0lEJywgY29sdW1uOiAnY3JlYXRlZF9ieV9pZCcsIHR5cGU6ICdpbnRlZ2VyJyB9LFxyXG4gICAgICB7IG5hbWU6ICdjcmVhdGVkQnlJRCcsIGNvbHVtbjogJ2NyZWF0ZWRfYnlfcmVzb3VyY2VfaWQnLCB0eXBlOiAnc3RyaW5nJyB9LFxyXG4gICAgICB7IG5hbWU6ICdhbHRpdHVkZScsIGNvbHVtbjogJ2FsdGl0dWRlJywgdHlwZTogJ2RvdWJsZScgfSxcclxuICAgICAgeyBuYW1lOiAnYWNjdXJhY3knLCBjb2x1bW46ICdhY2N1cmFjeScsIHR5cGU6ICdkb3VibGUnIH0sXHJcbiAgICAgIHsgbmFtZTogJ2RpcmVjdGlvbicsIGNvbHVtbjogJ2RpcmVjdGlvbicsIHR5cGU6ICdkb3VibGUnIH0sXHJcbiAgICAgIHsgbmFtZTogJ3dpZHRoJywgY29sdW1uOiAnd2lkdGgnLCB0eXBlOiAnaW50ZWdlcicgfSxcclxuICAgICAgeyBuYW1lOiAnaGVpZ2h0JywgY29sdW1uOiAnaGVpZ2h0JywgdHlwZTogJ2ludGVnZXInIH0sXHJcbiAgICAgIHsgbmFtZTogJ21ha2UnLCBjb2x1bW46ICdtYWtlJywgdHlwZTogJ3N0cmluZycgfSxcclxuICAgICAgeyBuYW1lOiAnbW9kZWwnLCBjb2x1bW46ICdtb2RlbCcsIHR5cGU6ICdzdHJpbmcnIH0sXHJcbiAgICAgIHsgbmFtZTogJ3NvZnR3YXJlJywgY29sdW1uOiAnc29mdHdhcmUnLCB0eXBlOiAnc3RyaW5nJyB9LFxyXG4gICAgICB7IG5hbWU6ICdkYXRlVGltZScsIGNvbHVtbjogJ2RhdGVfdGltZScsIHR5cGU6ICdzdHJpbmcnIH0sXHJcbiAgICAgIHsgbmFtZTogJ2NyZWF0ZWRBdCcsIGNvbHVtbjogJ3NlcnZlcl9jcmVhdGVkX2F0JywgdHlwZTogJ2RhdGV0aW1lJyB9LFxyXG4gICAgICB7IG5hbWU6ICd1cGRhdGVkQXQnLCBjb2x1bW46ICdzZXJ2ZXJfdXBkYXRlZF9hdCcsIHR5cGU6ICdkYXRldGltZScgfVxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIGdldCBpZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pZDtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUZyb21BUElBdHRyaWJ1dGVzKGF0dHJpYnV0ZXMpIHtcclxuICAgIHRoaXMuX2lkID0gYXR0cmlidXRlcy5hY2Nlc3Nfa2V5O1xyXG4gICAgdGhpcy5fZXhpZiA9IGF0dHJpYnV0ZXMuZXhpZjtcclxuICAgIHRoaXMuX2ZpbGVTaXplID0gYXR0cmlidXRlcy5maWxlX3NpemU7XHJcbiAgICB0aGlzLl9sYXRpdHVkZSA9IGF0dHJpYnV0ZXMubGF0aXR1ZGU7XHJcbiAgICB0aGlzLl9sb25naXR1ZGUgPSBhdHRyaWJ1dGVzLmxvbmdpdHVkZTtcclxuICAgIHRoaXMuX2lzVXBsb2FkZWQgPSBhdHRyaWJ1dGVzLnVwbG9hZGVkO1xyXG4gICAgdGhpcy5faXNTdG9yZWQgPSBhdHRyaWJ1dGVzLnN0b3JlZDtcclxuICAgIHRoaXMuX2lzUHJvY2Vzc2VkID0gYXR0cmlidXRlcy5wcm9jZXNzZWQ7XHJcbiAgICB0aGlzLl9jb250ZW50VHlwZSA9IGF0dHJpYnV0ZXMuY29udGVudF90eXBlO1xyXG4gICAgdGhpcy5fY3JlYXRlZEJ5SUQgPSBhdHRyaWJ1dGVzLmNyZWF0ZWRfYnlfaWQ7XHJcbiAgICB0aGlzLl91cGRhdGVkQnlJRCA9IGF0dHJpYnV0ZXMudXBkYXRlZF9ieV9pZDtcclxuICAgIHRoaXMuX2NyZWF0ZWRBdCA9IERhdGVVdGlscy5wYXJzZUlTT1RpbWVzdGFtcChhdHRyaWJ1dGVzLmNyZWF0ZWRfYXQpO1xyXG4gICAgdGhpcy5fdXBkYXRlZEF0ID0gRGF0ZVV0aWxzLnBhcnNlSVNPVGltZXN0YW1wKGF0dHJpYnV0ZXMudXBkYXRlZF9hdCk7XHJcbiAgICB0aGlzLl9mb3JtSUQgPSBhdHRyaWJ1dGVzLmZvcm1faWQ7XHJcbiAgICB0aGlzLl9yZWNvcmRJRCA9IGF0dHJpYnV0ZXMucmVjb3JkX2lkO1xyXG5cclxuICAgIGlmIChhdHRyaWJ1dGVzLmV4aWYpIHtcclxuICAgICAgY29uc3Qge2V4aWZ9ID0gYXR0cmlidXRlcztcclxuXHJcbiAgICAgIHRoaXMuX2FsdGl0dWRlID0gZXhpZi5ncHNfYWx0aXR1ZGU7XHJcbiAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IGV4aWYuZ3BzX2ltZ19kaXJlY3Rpb247XHJcbiAgICAgIHRoaXMuX2FjY3VyYWN5ID0gZXhpZi5ncHNfZG9wO1xyXG4gICAgICB0aGlzLl93aWR0aCA9IGV4aWYucGl4ZWxfeF9kaW1lbnNpb247XHJcbiAgICAgIHRoaXMuX2hlaWdodCA9IGV4aWYucGl4ZWxfeV9kaW1lbnNpb247XHJcbiAgICAgIHRoaXMuX21ha2UgPSBleGlmLm1ha2U7XHJcbiAgICAgIHRoaXMuX21vZGVsID0gZXhpZi5tb2RlbDtcclxuICAgICAgdGhpcy5fc29mdHdhcmUgPSBleGlmLnNvZnR3YXJlO1xyXG4gICAgICB0aGlzLl9kYXRlVGltZSA9IGV4aWYuZGF0ZV90aW1lX29yaWdpbmFsIHx8IGV4aWYuZGF0ZV90aW1lO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IGlzRG93bmxvYWRlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0Rvd25sb2FkZWQ7XHJcbiAgfVxyXG5cclxuICBzZXQgaXNEb3dubG9hZGVkKHZhbHVlKSB7XHJcbiAgICB0aGlzLl9pc0Rvd25sb2FkZWQgPSAhIXZhbHVlO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNyZWF0ZWRBdCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jcmVhdGVkQXQ7XHJcbiAgfVxyXG5cclxuICBnZXQgdXBkYXRlZEF0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3VwZGF0ZWRBdDtcclxuICB9XHJcbn1cclxuXHJcblBlcnNpc3RlbnRPYmplY3QucmVnaXN0ZXIoUGhvdG8pO1xyXG4iXX0=